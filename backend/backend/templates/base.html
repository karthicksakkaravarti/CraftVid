{% load static i18n %}<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>{% block title %}CraftVid{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Professional Video Creation Platform" />
    <meta name="author" content="karthicksakkaravarthi@gmail.com" />
    <link rel="icon" href="{% static 'images/favicons/favicon.ico' %}" />
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    {% comment %} <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script> {% endcomment %}
    
    {% block css %}
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          container: {
            center: true,
            padding: '2rem',
            screens: {
              '2xl': '1400px',
            },
          },
          extend: {
            colors: {
              border: '#e2e8f0',
              input: '#e2e8f0',
              ring: '#3b82f6',
              background: '#ffffff',
              foreground: '#0f172a',
              primary: {
                DEFAULT: '#3b82f6',
                foreground: '#ffffff',
              },
              secondary: {
                DEFAULT: '#f1f5f9',
                foreground: '#0f172a',
              },
              destructive: {
                DEFAULT: '#ef4444',
                foreground: '#ffffff',
              },
              muted: {
                DEFAULT: '#f1f5f9',
                foreground: '#64748b',
              },
              accent: {
                DEFAULT: '#3b82f6',
                foreground: '#ffffff',
              },
              card: {
                DEFAULT: '#ffffff',
                foreground: '#0f172a',
              },
            },
            borderRadius: {
              lg: '0.75rem',
              md: '0.5rem',
              sm: '0.25rem',
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
          },
        },
      }
    </script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

      /* Alpine.js */
      [x-cloak] {
        display: none !important;
      }

      /* Button Styles */
      .btn-primary {
        background: linear-gradient(45deg, #3b82f6, #6366f1);
        color: white;
        font-weight: 500;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease-in-out;
        padding: 0.5rem 1rem;
        height: 2.5rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .btn-primary:hover {
        opacity: 0.95;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .btn-secondary {
        background-color: #f1f5f9;
        color: #0f172a;
        font-weight: 500;
        border: 1px solid #e2e8f0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        transition: all 0.2s ease-in-out;
        padding: 0.5rem 1rem;
        height: 2.5rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .btn-secondary:hover {
        background-color: #3b82f6;
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .btn-destructive {
        background-color: #ef4444;
        color: white;
        font-weight: 500;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease-in-out;
        padding: 0.5rem 1rem;
        height: 2.5rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .btn-destructive:hover {
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      /* Form Styles */
      .form-input {
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        border: 1px solid #e2e8f0;
        background-color: white;
        color: #0f172a;
        transition: all 0.2s ease-in-out;
      }

      .form-input::placeholder {
        color: #64748b;
      }

      .form-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
      }

      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: #0f172a;
      }

      /* Card Styles */
      .card {
        background-color: white;
        border: 1px solid #e2e8f0;
        border-radius: 0.75rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      /* Gradient Text */
      .gradient-text {
        background: linear-gradient(45deg, #3b82f6, #6366f1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 700;
      }

      /* Background Patterns */
      .bg-grid-pattern {
        background-size: 100px 100px;
        background-image: 
          linear-gradient(to right, rgba(59, 130, 246, 0.1) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
      }

      .bg-dot-pattern {
        background-image: radial-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px);
        background-size: 24px 24px;
      }
    </style>
    <link href="{% static 'css/project.css' %}" rel="stylesheet" />
    {% endblock css %}
  </head>
  <body class="min-h-screen bg-background font-sans antialiased">
    <div class="relative flex min-h-screen flex-col">
      <header class="sticky top-0 z-50 w-full border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60">
        <div class="container flex h-16 items-center">
          <div class="mr-4 flex">
            <a class="mr-6 flex items-center space-x-2" href="{% url 'home' %}">
              <span class="text-xl font-bold gradient-text">CraftVid</span>
            </a>
          </div>
          <div class="flex flex-1 items-center justify-between space-x-2 md:justify-end">
            <nav class="flex items-center space-x-6">
              <a href="{% url 'home' %}" class="text-sm font-medium text-foreground hover:text-primary">Home</a>
              <a href="{% url 'about' %}" class="text-sm font-medium text-foreground hover:text-primary">About</a>
              {% if request.user.is_authenticated %}
              <div class="relative" x-data="{ open: false }" x-init="console.log('Alpine initialized dropdown')">
                <button 
                  @click="open = !open"
                  class="flex items-center space-x-2 hover:text-primary transition-colors"
                >
                  {% if request.user.socialaccount_set.exists %}
                    {% with account=request.user.socialaccount_set.first %}
                      <img 
                        src="{{ account.get_avatar_url }}" 
                        alt="{{ request.user.name }}"
                        class="h-8 w-8 rounded-full object-cover ring-2 ring-primary/20"
                      />
                    {% endwith %}
                  {% else %}
                    <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/20">
                      <span class="text-sm font-medium text-primary">
                        {{ request.user.name|default:request.user.email|slice:":2"|upper }}
                      </span>
                    </div>
                  {% endif %}
                  <span class="text-sm font-medium hidden md:inline-block bg-gradient-to-r from-blue-500 to-purple-500 text-transparent bg-clip-text">
                    {{ request.user.name|default:request.user.email }}
                  </span>
                </button>
                
                <div 
                  x-show="open"
                  @click.outside="open = false"
                  x-transition:enter="transition ease-out duration-200"
                  x-transition:enter-start="transform opacity-0 scale-95"
                  x-transition:enter-end="transform opacity-100 scale-100"
                  x-transition:leave="transition ease-in duration-150"
                  x-transition:leave-start="transform opacity-100 scale-100"
                  x-transition:leave-end="transform opacity-0 scale-95"
                  class="absolute right-0 mt-2 w-48 rounded-lg bg-card border shadow-lg py-1 z-50"
                  style="display: none;"
                >
                  <a 
                    href="{% url 'users:detail' request.user.pk %}" 
                    class="flex items-center px-4 py-2 text-sm text-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="mr-2 h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                    {% translate "Profile" %}
                  </a>
                  <a 
                    href="{% url 'account_email' %}" 
                    class="flex items-center px-4 py-2 text-sm text-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="mr-2 h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect width="20" height="16" x="2" y="4" rx="2"/>
                      <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                    </svg>
                    {% translate "Email Settings" %}
                  </a>
                  <div class="border-t border-border/50 my-1"></div>
                  <a 
                    href="{% url 'account_logout' %}" 
                    class="flex items-center px-4 py-2 text-sm text-destructive hover:bg-destructive/10 transition-colors"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" class="mr-2 h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                      <polyline points="16 17 21 12 16 7"/>
                      <line x1="21" x2="9" y1="12" y2="12"/>
                    </svg>
                    {% translate "Sign Out" %}
                  </a>
                </div>
              </div>
              {% else %}
              {% if ACCOUNT_ALLOW_REGISTRATION %}
              <a 
                href="{% url 'account_signup' %}" 
                class="btn-secondary inline-flex items-center justify-center rounded-lg text-sm font-medium h-9 px-4"
              >
                {% translate "Sign Up" %}
              </a>
              {% endif %}
              <a 
                href="{% url 'account_login' %}" 
                class="btn-primary inline-flex items-center justify-center rounded-lg text-sm font-medium h-9 px-4"
              >
                {% translate "Sign In" %}
              </a>
              {% endif %}
            </nav>
          </div>
        </div>
      </header>

      <main class="flex-1">
        {% if messages %}
        <div class="container py-4">
          {% for message in messages %}
          <div class="rounded-lg border px-4 py-3 text-sm {% if message.tags == 'error' %}border-destructive/50 bg-destructive/10 text-destructive{% else %}border-primary/50 bg-primary/10 text-primary{% endif %}" role="alert">
            {{ message }}
          </div>
          {% endfor %}
        </div>
        {% endif %}

        {% block content %}
        {% endblock content %}
      </main>

      <footer class="border-t py-6 md:py-0">
        <div class="container flex flex-col items-center justify-between gap-4 md:h-16 md:flex-row">
          <p class="text-sm text-muted-foreground">
            Built with ❤️ by CraftVid Team
          </p>
          <div class="flex items-center space-x-4">
            <a href="#" class="text-sm text-muted-foreground hover:text-primary transition-colors">Privacy</a>
            <a href="#" class="text-sm text-muted-foreground hover:text-primary transition-colors">Terms</a>
          </div>
        </div>
      </footer>
    </div>

    {% block modal %}{% endblock modal %}
    {% block inline_javascript %}{% endblock inline_javascript %}
    {% block javascript %}
    <link rel="stylesheet" href="https://esironal.github.io/cmtouch/lib/codemirror.css">
<link rel="stylesheet" href="https://esironal.github.io/cmtouch/addon/hint/show-hint.css">
<script src="https://esironal.github.io/cmtouch/lib/codemirror.js"></script>
<script src="https://esironal.github.io/cmtouch/addon/hint/show-hint.js"></script>
<script src="https://esironal.github.io/cmtouch/addon/hint/xml-hint.js"></script>
<script src="https://esironal.github.io/cmtouch/addon/hint/html-hint.js"></script>
<script src="https://esironal.github.io/cmtouch/mode/xml/xml.js"></script>
<script src="https://esironal.github.io/cmtouch/mode/javascript/javascript.js"></script>
<script src="https://esironal.github.io/cmtouch/mode/css/css.js"></script>
<script src="https://esironal.github.io/cmtouch/mode/htmlmixed/htmlmixed.js"></script>
<script src="https://esironal.github.io/cmtouch/addon/selection/active-line.js"></script>
<script src="https://esironal.github.io/cmtouch/addon/edit/matchbrackets.js"></script>
    <script defer src="{% static 'js/project.js' %}"></script>
    {% endblock javascript %}
    {% block extra_js %}{% endblock extra_js %}
  </body>
</html>
